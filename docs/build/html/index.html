

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Documentation for Magic &mdash; Magic  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="#" class="icon icon-home">
            Magic
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Documentation for Magic</a></li>
<li><a class="reference internal" href="#indices-and-searching">Indices and Searching</a></li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#crds-environment-variables">CRDS Environment Variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-usage">Example Usage</a></li>
<li><a class="reference internal" href="#code">Code</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">Magic</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Documentation for Magic</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="documentation-for-magic">
<h1>Documentation for Magic<a class="headerlink" href="#documentation-for-magic" title="Link to this heading"></a></h1>
<div class="toctree-wrapper compound">
</div>
<p><code class="docutils literal notranslate"><span class="pre">Magic</span></code> is a general-purpose tool that subtracts the sky background from dithered MIRI images that contain only point sources.
This tool should be run on <code class="docutils literal notranslate"><span class="pre">jwst</span></code> Stage 2 data products, followed by the provided wrapper for <code class="docutils literal notranslate"><span class="pre">jwst</span></code> Stage 3.
The only file that needs to be modified and then executed is <code class="docutils literal notranslate"><span class="pre">make_magic.py</span></code>.</p>
</section>
<section id="indices-and-searching">
<h1>Indices and Searching<a class="headerlink" href="#indices-and-searching" title="Link to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>
<section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h1>
<p>It is <strong>strongly</strong> recommended that you install <code class="docutils literal notranslate"><span class="pre">Magic</span></code> in a new <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment as other packages you’ve previously
installed could have conflicting requirements with <code class="docutils literal notranslate"><span class="pre">Magic</span></code>. You can install a lightweight version of conda at
<a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">this link</a>. Once conda is installed, you can create a
new environment by doing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>magic<span class="w"> </span><span class="nv">python</span><span class="o">==</span><span class="m">3</span>.11
conda<span class="w"> </span>activate<span class="w"> </span>magic
</pre></div>
</div>
<p>Once in your new conda environment, you can install <code class="docutils literal notranslate"><span class="pre">Magic</span></code> directly from source on
<a class="reference external" href="http://github.com/kevin218/Magic">GitHub</a> using <code class="docutils literal notranslate"><span class="pre">git</span></code> and <code class="docutils literal notranslate"><span class="pre">pip</span></code> by running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/kevin218/Magic.git
<span class="nb">cd</span><span class="w"> </span>Magic
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;.[jwst]&#39;</span>
</pre></div>
</div>
<p>To update your <code class="docutils literal notranslate"><span class="pre">Magic</span></code> installation to the most recent version, you can do the following within that Eureka folder:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>pull
pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;.[jwst]&#39;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-e</span></code> flag makes the install editable, which means that you do not have to install the package again and again after each change.  Changes to your files inside the project folder will automatically reflect in changes on your installed package.  However, if you are working in an interactive environment (e.g., ipython, Jupyter) you will need to re-import any modules that have changed.</p>
<section id="crds-environment-variables">
<h2>CRDS Environment Variables<a class="headerlink" href="#crds-environment-variables" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Magic</span></code> installs the JWST Calibration Pipeline as part of its requirements, and this also requires users to set the proper environment variables so that it can download the proper reference files needed to run the pipeline. For users not on the internal STScI network, two environment variables need to be set to enable this functionality. In your <code class="docutils literal notranslate"><span class="pre">~/.zshrc</span></code> (for zsh users) or <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> or <code class="docutils literal notranslate"><span class="pre">~/.bash_profile</span></code> file (for bash users), or other shell initialization file, add these two lines (specifying your desired location to cache the CRDS files, e.g. <code class="docutils literal notranslate"><span class="pre">/Users/your_name/crds_cache</span></code> for Mac users or <code class="docutils literal notranslate"><span class="pre">/home/your_name/crds_cache</span></code> for Linux users):</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">CRDS_PATH</span><span class="o">=</span>/PATH/TO/FOLDER/crds_cache

<span class="nb">export</span><span class="w"> </span><span class="nv">CRDS_SERVER_URL</span><span class="o">=</span>https://jwst-crds.stsci.edu
</pre></div>
</div>
</div></blockquote>
<p>If these environment variables are not set, Stages 1-3 of the pipeline will fail.</p>
</section>
</section>
<section id="example-usage">
<h1>Example Usage<a class="headerlink" href="#example-usage" title="Link to this heading"></a></h1>
<p>See <code class="docutils literal notranslate"><span class="pre">make_magic.py</span></code>.</p>
</section>
<section id="code">
<h1>Code<a class="headerlink" href="#code" title="Link to this heading"></a></h1>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Kevin B. Stevenson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>